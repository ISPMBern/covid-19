p3
dev.off()
}
references <- read.csv(file="https://raw.githubusercontent.com/ZikaProject/COVID_references/master/current.csv", stringsAsFactors=FALSE)
references$strategydate<-as.Date(references$strategydate,format="%Y-%m-%d")
references$date_entrez<-as.Date(references$date_entrez,format="%d-%m-%Y")
references$studytype1<-as.numeric(references$studytype1)
references$source<-as.numeric(references$source)
references$preprint<-factor(ifelse(references$source<3,1,0), labels=c("Peer reviewed","Preprint"))
references=subset(references, year>2019)
tmp<-references %>% group_by(date_entrez, preprint) %>% summarise(n=n())
#tmp2 <- tmp %>% select(date_entrez, preprint,n) %>% group_by(date_entrez,preprint) %>% summarise(tot=cumsum(n))
tmp2 <- tmp %>% group_by(preprint) %>% arrange(date_entrez) %>% mutate(tot = cumsum(n))
#![](images/bag.png)
#[![](images/bag.png)](https://zika.ispm.unibe.ch/assets/data/pub/search_beta/)
p1=ggplot(tmp2[!is.na(tmp2$preprint),],aes(x=date_entrez,y=tot, color=factor(preprint)))+
geom_line(size=1.5)+  theme_bw()+
scale_color_manual(name="Publication",values=c("#00AFBB","#E7B800"),labels=c("peer reviewed","preprint"))+
ylab("Number of publications")+xlab("Date")+
theme(panel.grid.minor = element_blank(),
panel.grid.major = element_line(color = "gray85", size = 0.5),
panel.grid.major.x = element_blank(),
legend.position = "bottom")+
ggtitle(paste("Speed of accumulation of evidence",Sys.Date()))
pre=nrow(references[references$source<=2,])
#published:
pub=nrow(references[references$source>2,])
text= paste0("As of ", format(Sys.Date(),"%d.%m.%Y"), " there are\n* ", pre, " pre-prints\n* ", pub," peer-reviewed ")
library(cowplot)
p2=ggplot()+
geom_rect(aes(xmin=0,xmax=10,ymin=0,ymax=10), alpha=0.5, fill="white")+
geom_text(aes(x=1,y=8, label=text), hjust=0)+
theme_void()
p3<-plot_grid(p1,p2, rel_widths = c(10,5))
png(file="DailyResLivEv_13_05.png", width=30, height=10, units="cm", res=300)
p3
dev.off()
p3 <- plot_grid(p1, p2)
p3
title <- ggdraw() +
draw_label(
"Miles per gallon decline with displacement and horsepower",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
# add margin on the left of the drawing canvas,
# so title is aligned with left edge of first plot
plot.margin = margin(0, 0, 0, 7)
)
plot_grid(
title, p3,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)
title <- ggdraw() +
draw_label(
"COVID - 19 Living Evidence",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
# add margin on the left of the drawing canvas,
# so title is aligned with left edge of first plot
plot.margin = margin(0, 0, 0, 7)
)
plot_grid(
title, p3,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)
title <- ggdraw() +
draw_label(
"COVID - 19 Living Evidence",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
# add margin on the left of the drawing canvas,
# so title is aligned with left edge of first plot
plot.margin = margin(0, 5, 0, 7)
)
plot_grid(
title, p3,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)
p3<-plot_grid(p1,p2, rel_widths = c(10,5))
title <- ggdraw() +
draw_label(
"COVID - 19 Living Evidence",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
# add margin on the left of the drawing canvas,
# so title is aligned with left edge of first plot
plot.margin = margin(0, 5, 0, 7)
)
plot_grid(
title, p3,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)
p2=ggplot()+
geom_rect(aes(xmin=0,xmax=10,ymin=0,ymax=10), alpha=0.5, fill="white")+
geom_text(aes(x=1,y=8, label=text), hjust=5)+
theme_void()
p3<-plot_grid(p1,p2, rel_widths = c(10,5))
title <- ggdraw() +
draw_label(
"COVID - 19 Living Evidence",
fontface = 'bold',
x = 0,
hjust = 0
) +
theme(
# add margin on the left of the drawing canvas,
# so title is aligned with left edge of first plot
plot.margin = margin(0, 0, 0, 7)
)
plot_grid(
title, p3,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)
text= paste0("As of ", format(Sys.Date(),"%d.%m.%Y"), " there are\n* ", pre, " pre-prints\n* ", pub," peer-reviewed ")
text
title <- ggdraw() +
draw_label(
"COVID - 19 Living Evidence",
fontface = 'bold',
size = 10,
x = 0,
hjust = 0
) +
theme(
# add margin on the left of the drawing canvas,
# so title is aligned with left edge of first plot
plot.margin = margin(0, 0, 0, 7)
)
plot_grid(
title, p3,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)
title <- ggdraw() +
draw_label(
"COVID - 19 Living Evidence",
fontface = 'bold',
size = 50,
x = 0,
hjust = 0
) +
theme(
# add margin on the left of the drawing canvas,
# so title is aligned with left edge of first plot
plot.margin = margin(0, 0, 0, 7)
)
plot_grid(
title, p3,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)
title <- ggdraw() +
draw_label(
"COVID - 19 Living Evidence",
fontface = 'bold',
size = 40,
x = 0,
hjust = 0
) +
theme(
# add margin on the left of the drawing canvas,
# so title is aligned with left edge of first plot
plot.margin = margin(0, 0, 0, 7)
)
plot_grid(
title, p3,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)
title <- ggdraw() +
draw_label(
"COVID - 19 Living Evidence",
fontface = 'bold',
size = 30,
x = 0,
hjust = 0
) +
theme(
# add margin on the left of the drawing canvas,
# so title is aligned with left edge of first plot
plot.margin = margin(0, 0, 0, 7)
)
plot_grid(
title, p3,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)
title <- ggdraw() +
draw_label(
"COVID - 19 Living Evidence",
fontface = 'bold',
size = 25,
x = 0,
hjust = 0
) +
theme(
# add margin on the left of the drawing canvas,
# so title is aligned with left edge of first plot
plot.margin = margin(0, 0, 0, 7)
)
plot_grid(
title, p3,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)
title <- ggdraw() +
draw_label(
"COVID - 19 Living Evidence",
fontface = 'bold',
size = 20,
x = 0,
hjust = 0
) +
theme(
# add margin on the left of the drawing canvas,
# so title is aligned with left edge of first plot
plot.margin = margin(0, 0, 0, 7)
)
plot_grid(
title, p3,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)
p2=ggplot()+
geom_rect(aes(xmin=0,xmax=10,ymin=0,ymax=10), alpha=0.5, fill="white")+
geom_text(aes(x=1,y=8, label=text), hjust=0)+
theme_void()
p3<-plot_grid(p1,p2, rel_widths = c(10,5))
title <- ggdraw() +
draw_label(
"COVID - 19 Living Evidence",
fontface = 'bold',
size = 20,
x = 0,
hjust = 0
) +
theme(
# add margin on the left of the drawing canvas,
# so title is aligned with left edge of first plot
plot.margin = margin(0, 0, 0, 7)
)
plot_grid(
title, p3,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)
ggdraw(p1) +
draw_grob(p2)
ggdraw(p1 + theme_half_open(12)) +
draw_plot(p2, .45, .45, .5, .5) +
draw_plot_label(
c("A", "B"),
c(0, 0.45),
c(1, 0.95),
size = 12
)
ggdraw(p1 + theme_half_open(12)) +
draw_plot(p2, .45, .45, .5, .5)
ggdraw(p1 + theme_half_open(12)) +
draw_plot(p2, .45, .45, .1, .1)
ggdraw(p1 + theme_half_open(12)) +
draw_plot(p2, .15, .45, .5, .5)
ggdraw(p1 + theme_half_open(12)) +
draw_plot(p2, .15, .25, .5, .5)
p3 <- ggdraw(p1 + theme_half_open(12)) +
draw_plot(p2, .15, .25, .5, .5)
title <- ggdraw() +
draw_label(
"COVID - 19 Living Evidence",
fontface = 'bold',
size = 20,
x = 0,
hjust = 0
) +
theme(
# add margin on the left of the drawing canvas,
# so title is aligned with left edge of first plot
plot.margin = margin(0, 0, 0, 7)
)
plot_grid(
title, p3,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)
text= paste0("As of ", format(Sys.Date(),"%d.%m.%Y"), " there are\n* ", pre, " pre-prints\n* ", pub," peer-reviewed\n* Pre-prints: BioArxiv, MedArxiv\n* Peer reviewed: Pubmed, Embase\n*")
p2=ggplot()+
geom_rect(aes(xmin=0,xmax=10,ymin=0,ymax=10), alpha=0.5, fill="white")+
geom_text(aes(x=1,y=8, label=text), hjust=0)+
theme_void()
p3 <- ggdraw(p1 + theme_half_open(12)) +
draw_plot(p2, .15, .25, .5, .5)
title <- ggdraw() +
draw_label(
"COVID - 19 Living Evidence",
fontface = 'bold',
size = 20,
x = 0,
hjust = 0
) +
theme(
# add margin on the left of the drawing canvas,
# so title is aligned with left edge of first plot
plot.margin = margin(0, 0, 0, 7)
)
plot_grid(
title, p3,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)
library(DT)
library(shiny)
library(dplyr)
library(sqldf)
library(stringr)
library(sjmisc)
library(rapportools)
library(DT)
library(shiny)
library(dplyr)
library(sqldf)
library(stringr)
library(sjmisc)
library(rapportools)
text= HTML("Pre-prints: BioArxiv, MedArxiv\n* Peer reviewed: Pubmed, Embase\n*", paste0("As of ", format(Sys.Date(),"%d.%m.%Y"), " there are\n* ", pre, " pre-prints\n* ", pub," peer-reviewed\n* "))
text
text= HTML("Pre-prints: BioArxiv, MedArxiv\n Peer reviewed: Pubmed, Embase\n*", paste0("As of ", format(Sys.Date(),"%d.%m.%Y"), " there are\n* ", pre, " pre-prints\n* ", pub," peer-reviewed\n* "))
text
text= HTML("Pre-prints: BioArxiv, MedArxiv\n Peer reviewed: Pubmed, Embase\n*", paste0("As of ", format(Sys.Date(),"%d.%m.%Y"), " there are\n* ", pre, " pre-prints\n* ", pub," peer-reviewed "))
text
text= HTML("Sources\n Pre-prints: BioArxiv, MedArxiv\n Peer reviewed: Pubmed, Embase\n*", paste0("As of ", format(Sys.Date(),"%d.%m.%Y"), " there are\n* ", pre, " pre-prints\n* ", pub," peer-reviewed "))
text
text= HTML("<b>Sources:<\b>\n Pre-prints: BioArxiv, MedArxiv\n Peer reviewed: Pubmed, Embase\n*", paste0("As of ", format(Sys.Date(),"%d.%m.%Y"), " there are\n* ", pre, " pre-prints\n* ", pub," peer-reviewed "))
text
text= HTML("Sources:<br> Pre-prints: BioArxiv, MedArxiv\n Peer reviewed: Pubmed, Embase\n*", paste0("As of ", format(Sys.Date(),"%d.%m.%Y"), " there are\n* ", pre, " pre-prints\n* ", pub," peer-reviewed "))
text
text= HTML("Sources:\n Pre-prints: BioArxiv, MedArxiv\n Peer reviewed: Pubmed, Embase\n*", paste0("As of ", format(Sys.Date(),"%d.%m.%Y"), " there are\n* ", pre, " pre-prints\n* ", pub," peer-reviewed "))
text
text= HTML("Sources:\n Pre-prints: BioArxiv, MedArxiv\n Peer-reviewed: Pubmed, Embase\n*", paste0("As of ", format(Sys.Date(),"%d.%m.%Y"), " there are\n* ", pre, " pre-prints\n* ", pub," peer-reviewed "))
text
text= HTML("Sources:\n Pre-prints: BioArxiv, MedArxiv\n Peer-reviewed: Pubmed, Embase\n\n*", paste0("As of ", format(Sys.Date(),"%d.%m.%Y"), " there are\n* ", pre, " pre-prints\n* ", pub," peer-reviewed "))
text
p3 <- ggdraw(p1 + theme_half_open(12)) +
draw_plot(p2, .15, .25, .5, .5)
title <- ggdraw() +
draw_label(
"COVID - 19 Living Evidence",
fontface = 'bold',
size = 20,
x = 0,
hjust = 0
) +
theme(
# add margin on the left of the drawing canvas,
# so title is aligned with left edge of first plot
plot.margin = margin(0, 0, 0, 7)
)
plot_grid(
title, p3,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)
p3 <- ggdraw(p1 + theme_half_open(12)) +
draw_plot(p2, .05, .25, .5, .5)
title <- ggdraw() +
draw_label(
"COVID - 19 Living Evidence",
fontface = 'bold',
size = 20,
x = 0,
hjust = 0
) +
theme(
# add margin on the left of the drawing canvas,
# so title is aligned with left edge of first plot
plot.margin = margin(0, 0, 0, 7)
)
plot_grid(
title, p3,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)
p3 <- ggdraw(p1 + theme_half_open(12)) +
draw_plot(p2, .15, .25, .5, .5)
title <- ggdraw() +
draw_label(
"COVID - 19 Living Evidence",
fontface = 'bold',
size = 20,
x = 0,
hjust = 0
) +
theme(
# add margin on the left of the drawing canvas,
# so title is aligned with left edge of first plot
plot.margin = margin(0, 0, 0, 7)
)
plot_grid(
title, p3,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)
p3 <- ggdraw(p1 + theme_half_open(12)) +
draw_plot(p2, .10, .25, .5, .5)
title <- ggdraw() +
draw_label(
"COVID - 19 Living Evidence",
fontface = 'bold',
size = 20,
x = 0,
hjust = 0
) +
theme(
# add margin on the left of the drawing canvas,
# so title is aligned with left edge of first plot
plot.margin = margin(0, 0, 0, 7)
)
plot_grid(
title, p3,
ncol = 1,
# rel_heights values control vertical title margins
rel_heights = c(0.1, 1)
)
library(dplyr)
library(cowplot)
library(ggplot2)
references <- read.csv(file="https://raw.githubusercontent.com/ZikaProject/COVID_references/master/current.csv", stringsAsFactors=FALSE)
setwd("C:/Users/hi19u875/Desktop/ZIKA")
setwd("C:/Users/hi19u875/Desktop/ZIKA/covid-19/images")
references<-read.csv(file="https://raw.githubusercontent.com/ZikaProject/COVID_references/master/current.csv", stringsAsFactors=FALSE)
references$strategydate<-as.Date(references$strategydate,format="%Y-%m-%d")
View(references)
references$date_entrez<-as.Date(references$date_entrez,format="%d-%m-%Y")
references$studytype1<-as.numeric(references$studytype1)
references$source<-as.numeric(references$source)
references$preprint<-factor(ifelse(references$source<3,1,0), labels=c("peer-reviewed","pre-prints"))
references=subset(references, year>2019)
View(references)
tmp<-references %>% group_by(date_entrez, preprint) %>% summarise(n=n())
p1=ggplot(tmp2[!is.na(tmp2$preprint),],aes(x=date_entrez,y=tot, color=factor(preprint)))+
geom_line(size=1.5)+  theme_bw()+
scale_color_manual(name="Publication",values=c("#00AFBB","#E7B800"),labels=c("peer reviewed","preprint"))+
ylab("Number of publications")+xlab("Date")+
theme(panel.grid.minor = element_blank(),
panel.grid.major = element_line(color = "gray85", size = 0.5),
panel.grid.major.x = element_blank(),
legend.position = "bottom")+
ggtitle(paste("Speed of accumulation of evidence",Sys.Date()))
#tmp2 <- tmp %>% select(date_entrez, preprint,n) %>% group_by(date_entrez,preprint) %>% summarise(tot=cumsum(n))
tmp2 <- tmp %>% group_by(preprint) %>% arrange(date_entrez) %>% mutate(tot = cumsum(n))
tmp<-references %>% group_by(date_entrez, preprint) %>% summarise(n=n())
references$preprint<-factor(ifelse(references$source<3,1,0), labels=c("peer-reviewed","pre-prints"))
references=subset(references, year>2019)
tmp<-references %>% group_by(date_entrez, preprint) %>% summarise(n=n())
references<-read.csv(file="https://raw.githubusercontent.com/ZikaProject/COVID_references/master/current.csv", stringsAsFactors=FALSE)
references$strategydate<-as.Date(references$strategydate,format="%Y-%m-%d")
references$date_entrez<-as.Date(references$date_entrez,format="%d-%m-%Y")
references$studytype1<-as.numeric(references$studytype1)
references$source<-as.numeric(references$source)
references$preprint<-factor(ifelse(references$source<3,1,0), labels=c("peer-reviewed","pre-prints"))
references=subset(references, year>2019)
tmp<-references %>% group_by(date_entrez, preprint) %>% summarise(n=n())
references$preprint<-factor(ifelse(references$source<3,1,0), labels=c("peer reviewed","pre prints"))
references=subset(references, year>2019)
tmp<-references %>% group_by(date_entrez, preprint) %>% summarise(n=n())
library(dplyr)
library(cowplot)
library(ggplot2)
library(dplyr)
library(cowplot)
library(ggplot2)
references<-read.csv(file="https://raw.githubusercontent.com/ZikaProject/COVID_references/master/current.csv", stringsAsFactors=FALSE)
references$strategydate<-as.Date(references$strategydate,format="%Y-%m-%d")
references$date_entrez<-as.Date(references$date_entrez,format="%d-%m-%Y")
references$studytype1<-as.numeric(references$studytype1)
references$source<-as.numeric(references$source)
references$preprint<-factor(ifelse(references$source<3,1,0), labels=c("Peer reviewed","Preprint"))
references=subset(references, year>2019)
tmp<-references %>% group_by(date_entrez, preprint) %>% summarise(n=n())
